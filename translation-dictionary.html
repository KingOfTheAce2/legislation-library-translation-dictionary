<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Professional Multilingual Legal Translation Dictionary - Multi-source translations with examples | NL-EN-FR-DE-ES">
    <meta name="keywords" content="Dutch law, legal translation, Nederlands recht, legal dictionary, multilingual legal terminology, civil procedure">
    <title>Multilingual Legal Translation Dictionary</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #1e40af;
            --primary-dark: #1e3a8a;
            --secondary: #3b82f6;
            --accent: #60a5fa;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --bg: #ffffff;
            --bg-secondary: #f8fafc;
            --bg-tertiary: #f1f5f9;
            --text: #1e293b;
            --text-secondary: #64748b;
            --text-light: #94a3b8;
            --border: #e2e8f0;
            --border-dark: #cbd5e1;
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
            line-height: 1.6;
            color: var(--text);
            background: var(--bg-secondary);
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 100%);
            color: white;
            padding: 1.5rem 0;
            box-shadow: var(--shadow-md);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 2rem;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
            color: white;
        }

        .logo:hover {
            opacity: 0.9;
        }

        .nav-links {
            display: flex;
            gap: 1.5rem;
            align-items: center;
        }

        .nav-link {
            color: rgba(255,255,255,0.9);
            text-decoration: none;
            font-size: 0.9rem;
            transition: color 0.2s;
        }

        .nav-link:hover {
            color: white;
        }

        /* Search Section */
        .search-container {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 0 2rem;
        }

        .search-box-wrapper {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: var(--shadow);
            margin-bottom: 1.5rem;
        }

        .search-input-group {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .search-input {
            flex: 1;
            padding: 1rem 1.5rem;
            font-size: 1.1rem;
            border: 2px solid var(--border);
            border-radius: 8px;
            transition: all 0.2s;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .search-btn {
            padding: 1rem 2rem;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .search-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        .search-filters {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            align-items: center;
        }

        .filter-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .filter-select {
            padding: 0.5rem 1rem;
            border: 1px solid var(--border);
            border-radius: 6px;
            background: white;
            font-size: 0.9rem;
            cursor: pointer;
        }

        .stats-bar {
            background: var(--bg-tertiary);
            padding: 1rem 1.5rem;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .stats-text {
            color: var(--text-secondary);
            font-size: 0.95rem;
        }

        .stats-text strong {
            color: var(--text);
            font-weight: 600;
        }

        /* Results Container */
        .results-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem 3rem;
        }

        /* Term Card */
        .term-card {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 1.5rem;
            box-shadow: var(--shadow);
            transition: box-shadow 0.2s;
        }

        .term-card:hover {
            box-shadow: var(--shadow-md);
        }

        .term-header {
            border-bottom: 2px solid var(--bg-tertiary);
            padding-bottom: 1rem;
            margin-bottom: 1.5rem;
        }

        .term-source {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .lang-badge {
            font-size: 0.75rem;
            font-weight: 600;
            padding: 0.25rem 0.6rem;
            border-radius: 4px;
            background: var(--bg-tertiary);
            color: var(--text-secondary);
            text-transform: uppercase;
        }

        /* Translations Section */
        .translations-section {
            margin-bottom: 2rem;
        }

        .section-title {
            font-size: 0.9rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .translation-item {
            background: var(--bg-secondary);
            border-left: 4px solid var(--secondary);
            padding: 1.25rem;
            margin-bottom: 1rem;
            border-radius: 6px;
        }

        .translation-text {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 0.5rem;
        }

        .translation-definition {
            color: var(--text-secondary);
            font-size: 1rem;
            margin-bottom: 0.75rem;
            font-style: italic;
        }

        .translation-meta {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            font-size: 0.85rem;
        }

        .meta-item {
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            color: var(--text-light);
        }

        .meta-item strong {
            color: var(--text-secondary);
        }

        .badge {
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
            padding: 0.25rem 0.6rem;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .badge-success {
            background: #d1fae5;
            color: #065f46;
        }

        .badge-info {
            background: #dbeafe;
            color: #1e40af;
        }

        .badge-warning {
            background: #fef3c7;
            color: #92400e;
        }

        /* Examples Section */
        .examples-section {
            margin-top: 2rem;
        }

        .example-item {
            background: var(--bg-tertiary);
            border-radius: 8px;
            padding: 1.25rem;
            margin-bottom: 1rem;
        }

        .example-sentence {
            margin-bottom: 0.75rem;
        }

        .example-label {
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            color: var(--text-light);
            margin-bottom: 0.25rem;
            letter-spacing: 0.05em;
        }

        .example-text {
            font-size: 1.05rem;
            color: var(--text);
            line-height: 1.6;
        }

        .example-meta {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
            font-size: 0.8rem;
            color: var(--text-light);
            padding-top: 0.75rem;
            border-top: 1px solid var(--border);
        }

        .premium-example {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border: 2px solid var(--warning);
            position: relative;
            overflow: hidden;
        }

        .premium-overlay {
            position: absolute;
            top: 0;
            right: 0;
            background: var(--warning);
            color: white;
            padding: 0.25rem 0.75rem;
            font-size: 0.75rem;
            font-weight: 700;
            border-bottom-left-radius: 8px;
        }

        .premium-blur {
            filter: blur(4px);
            user-select: none;
            pointer-events: none;
        }

        .premium-unlock {
            text-align: center;
            padding: 1rem;
            margin-top: 0.5rem;
        }

        .unlock-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            background: var(--warning);
            color: white;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            text-decoration: none;
        }

        .unlock-btn:hover {
            background: #d97706;
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        /* No Results */
        .no-results {
            text-align: center;
            padding: 4rem 2rem;
            color: var(--text-secondary);
        }

        .no-results-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.3;
        }

        /* Loading */
        .loading {
            text-align: center;
            padding: 3rem;
            color: var(--text-secondary);
        }

        .loading-spinner {
            display: inline-block;
            width: 40px;
            height: 40px;
            border: 4px solid var(--bg-tertiary);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Footer */
        .footer {
            background: white;
            border-top: 1px solid var(--border);
            padding: 2rem;
            margin-top: 3rem;
        }

        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
            text-align: center;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }

            .search-input-group {
                flex-direction: column;
            }

            .stats-bar {
                flex-direction: column;
                gap: 0.5rem;
                align-items: flex-start;
            }

            .term-source {
                font-size: 1.5rem;
            }

            .translation-text {
                font-size: 1.1rem;
            }
        }

        .highlight {
            background: #fef08a;
            padding: 0 0.2rem;
            border-radius: 2px;
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <a href="index.html" class="logo">
                <span>‚öñÔ∏è</span>
                <span>Translation Dictionary</span>
            </a>
            <nav class="nav-links">
                <a href="index.html" class="nav-link">‚Üê Home</a>
                <a href="monolingual-dictionary.html" class="nav-link">Monolingual Dictionary</a>
                <a href="legislation.html" class="nav-link">Legislation Library</a>
                <a href="authors-licenses.html" class="nav-link">Authors & Licenses</a>
            </nav>
        </div>
    </header>

    <div class="search-container">
        <div class="search-box-wrapper">
            <div class="search-input-group">
                <input
                    type="search"
                    id="searchInput"
                    class="search-input"
                    placeholder="Search legal terms in Dutch or English..."
                    autocomplete="off"
                >
                <button class="search-btn" onclick="performSearch()">üîç Search</button>
            </div>

            <div class="search-filters">
                <span class="filter-label">Filters:</span>
                <select id="reviewFilter" class="filter-select" onchange="performSearch()">
                    <option value="all">All Terms</option>
                    <option value="reviewed">Subject Matter Expert Reviewed Only</option>
                </select>
                <select id="licenseFilter" class="filter-select" onchange="performSearch()">
                    <option value="all">All Licenses</option>
                    <option value="cc0">CC0</option>
                    <option value="cc-by">CC BY 4.0</option>
                    <option value="cc-by-nc">CC BY-NC 4.0</option>
                </select>
            </div>
        </div>

        <div class="stats-bar">
            <div class="stats-text" id="resultsStats">
                Loading dictionary...
            </div>
            <div class="stats-text" id="totalStats">
                Loading statistics...
            </div>
        </div>
    </div>

    <div class="results-container" id="resultsContainer">
        <div class="loading">
            <div class="loading-spinner"></div>
            <p style="margin-top: 1rem;">Loading dictionary data...</p>
        </div>
    </div>

    <footer class="footer">
        <div class="footer-content">
            <p><strong>Multi-Source Legal Dictionary</strong> | Combining translations from professional legal sources</p>
            <p style="margin-top: 0.5rem;">
                Data licensed under CC0, CC BY 4.0, CC BY-NC 4.0 |
                <a href="#" style="color: var(--primary);">View Attributions</a>
            </p>
            <p style="margin-top: 0.5rem; font-size: 0.85rem;">
                Part of the Legislation Library Translation Project
            </p>
        </div>
    </footer>

    <script>
        // Dictionary data
        let dictionaryData = [];
        let currentFilters = {
            review: 'all',
            license: 'all'
        };

        // Load unified dictionary
        loadDictionary();

        async function loadDictionary() {
            try {
                console.log('Loading unified dictionary...');
                const response = await fetch('unified-dictionary.json');

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                dictionaryData = await response.json();
                console.log(`‚úì Loaded ${dictionaryData.length} terms`);

                displayResults(dictionaryData);
                updateStats(dictionaryData.length, dictionaryData.length);
            } catch (error) {
                console.error('Error loading dictionary:', error);
                document.getElementById('resultsContainer').innerHTML = `
                    <div class="no-results">
                        <div class="no-results-icon">‚ö†Ô∏è</div>
                        <h2>Error loading dictionary</h2>
                        <p>${error.message}</p>
                        <p style="margin-top: 1rem; font-size: 0.9rem;">
                            Make sure unified-dictionary.json is in the same directory.
                        </p>
                    </div>
                `;
            }
        }

        // Search functionality
        const searchInput = document.getElementById('searchInput');
        searchInput.addEventListener('input', debounce(performSearch, 300));
        searchInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') performSearch();
        });

        function performSearch() {
            const query = searchInput.value.toLowerCase().trim();
            let results = dictionaryData;

            // Apply search filter
            if (query) {
                results = results.filter(term => {
                    const termMatch = term.term.toLowerCase().includes(query);
                    const translationMatch = term.translations.some(t =>
                        t.translation.toLowerCase().includes(query)
                    );
                    const exampleMatch = term.examples.some(ex =>
                        ex.nl.toLowerCase().includes(query) ||
                        ex.en.toLowerCase().includes(query)
                    );

                    return termMatch || translationMatch || exampleMatch;
                });
            }

            // Apply review filter
            if (currentFilters.review === 'reviewed') {
                results = results.filter(term =>
                    term.translations.some(t => t['sme-reviewed'])
                );
            }

            // Apply license filter
            if (currentFilters.license !== 'all') {
                const licenseMap = {
                    'cc0': 'CC0',
                    'cc-by': 'CC BY 4.0',
                    'cc-by-nc': 'CC BY-NC 4.0'
                };
                results = results.filter(term =>
                    term.translations.some(t => t.license === licenseMap[currentFilters.license])
                );
            }

            displayResults(results, query);
            updateStats(results.length, dictionaryData.length);
        }

        function displayResults(results, query = '') {
            const container = document.getElementById('resultsContainer');

            if (results.length === 0) {
                container.innerHTML = `
                    <div class="no-results">
                        <div class="no-results-icon">üîç</div>
                        <h2>No results found</h2>
                        <p>Try adjusting your search terms or filters</p>
                    </div>
                `;
                return;
            }

            const html = results.map(term => renderTermCard(term, query)).join('');
            container.innerHTML = html;
        }

        function renderTermCard(term, query = '') {
            const termText = highlightText(term.term, query);
            const freeExamples = term.examples.filter(ex => !ex.premium);
            const premiumExamples = term.examples.filter(ex => ex.premium);

            return `
                <div class="term-card">
                    <div class="term-header">
                        <div class="term-source">
                            ${termText}
                            <span class="lang-badge">${term.lang}</span>
                        </div>
                    </div>

                    <div class="translations-section">
                        <div class="section-title">Translations (${term.translations.length})</div>
                        ${term.translations.map(t => renderTranslation(t, query)).join('')}
                    </div>

                    ${term.examples.length > 0 ? `
                        <div class="examples-section">
                            <div class="section-title">
                                Examples (${freeExamples.length} free${premiumExamples.length > 0 ? `, ${premiumExamples.length} premium` : ''})
                            </div>
                            ${freeExamples.map(ex => renderExample(ex, query, false)).join('')}
                            ${premiumExamples.map(ex => renderExample(ex, query, true)).join('')}
                        </div>
                    ` : ''}
                </div>
            `;
        }

        function renderTranslation(translation, query = '') {
            const translationText = highlightText(translation.translation, query);
            const licenseBadgeClass = {
                'CC0': 'badge-success',
                'CC BY 4.0': 'badge-info',
                'CC BY-NC 4.0': 'badge-warning'
            }[translation.license] || 'badge-info';

            return `
                <div class="translation-item">
                    <div class="translation-text">
                        ‚Üí ${translationText}
                        <span class="lang-badge">${translation.lang}</span>
                    </div>
                    ${translation.definition ? `
                        <div class="translation-definition">${translation.definition}</div>
                    ` : ''}
                    <div class="translation-meta">
                        <div class="meta-item">
                            <strong>Source:</strong> ${translation.source}
                        </div>
                        <div class="meta-item">
                            <strong>Type:</strong> ${translation['source-type']}
                        </div>
                        <span class="badge ${licenseBadgeClass}">${translation.license}</span>
                        ${translation['sme-reviewed'] ? '<span class="badge badge-success">‚úì Subject Matter Expert Reviewed</span>' : ''}
                        ${translation.context ? `<span class="badge badge-info">${translation.context}</span>` : ''}
                    </div>
                </div>
            `;
        }

        function renderExample(example, query = '', isPremium = false) {
            if (isPremium) {
                return `
                    <div class="example-item premium-example">
                        <div class="premium-overlay">PREMIUM</div>
                        <div class="premium-blur">
                            <div class="example-sentence">
                                <div class="example-label">Dutch</div>
                                <div class="example-text">${example.nl.substring(0, 30)}...</div>
                            </div>
                            <div class="example-sentence">
                                <div class="example-label">English</div>
                                <div class="example-text">${example.en.substring(0, 30)}...</div>
                            </div>
                        </div>
                        <div class="premium-unlock">
                            <button class="unlock-btn" onclick="showPremiumModal()">
                                üîì Unlock Premium Examples - $19/mo
                            </button>
                        </div>
                    </div>
                `;
            }

            const nlText = highlightText(example.nl, query);
            const enText = highlightText(example.en, query);

            return `
                <div class="example-item">
                    <div class="example-sentence">
                        <div class="example-label">Dutch</div>
                        <div class="example-text">${nlText}</div>
                    </div>
                    <div class="example-sentence">
                        <div class="example-label">English</div>
                        <div class="example-text">${enText}</div>
                    </div>
                    <div class="example-meta">
                        <span>Source: ${example.source}</span>
                        <span>License: ${example.license}</span>
                        ${example['sme-reviewed'] ? '<span>‚úì Verified</span>' : ''}
                    </div>
                </div>
            `;
        }

        function highlightText(text, query) {
            if (!query || !text) return text;
            const regex = new RegExp(`(${escapeRegExp(query)})`, 'gi');
            return text.replace(regex, '<span class="highlight">$1</span>');
        }

        function escapeRegExp(string) {
            return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
        }

        function updateStats(showing, total) {
            document.getElementById('resultsStats').innerHTML = `
                Showing <strong>${showing}</strong> of <strong>${total}</strong> terms
            `;

            // Update total stats
            if (dictionaryData.length > 0) {
                const totalTranslations = dictionaryData.reduce((sum, term) => sum + term.translations.length, 0);
                const totalExamples = dictionaryData.reduce((sum, term) => sum + term.examples.length, 0);
                const termsWithMultipleTranslations = dictionaryData.filter(t => t.translations.length > 1).length;

                document.getElementById('totalStats').innerHTML = `
                    <strong>${total.toLocaleString()}</strong> terms ¬∑
                    <strong>${totalTranslations.toLocaleString()}</strong> translations ¬∑
                    <strong>${totalExamples.toLocaleString()}</strong> examples
                    ${termsWithMultipleTranslations > 0 ? `¬∑ <strong>${termsWithMultipleTranslations}</strong> with multiple sources` : ''}
                `;
            }
        }

        function showPremiumModal() {
            alert('Premium features coming soon!\n\nUpgrade to access:\n‚Ä¢ Premium example sentences\n‚Ä¢ Bulk export (CSV, PDF)\n‚Ä¢ API access\n‚Ä¢ Priority support\n\nPrice: $19/month or $190/year');
        }

        // Filter handlers
        document.getElementById('reviewFilter').addEventListener('change', function() {
            currentFilters.review = this.value;
            performSearch();
        });

        document.getElementById('licenseFilter').addEventListener('change', function() {
            currentFilters.license = this.value;
            performSearch();
        });

        // Debounce helper
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }
    </script>
</body>
</html>
